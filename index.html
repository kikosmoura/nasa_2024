<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps with Shapefile Polygon</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDIN7HWPdq8rgmY2rKUbyPqVoCjpWaokkQ&libraries=places,geometry"></script>
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
</head>
<body>
    <main>
        <div id="map"></div>

        <!-- Elemento de busca centralizado -->
        <nav id="controls">
            <input type="text" id="address" placeholder="Informe um endereço">
            <button id="search" onclick="geocodeAddress()">Procurar</button>
        </nav>

        <!-- Botão com a imagem de camada -->
        <button id="layer-button">
            <img src="layer_v2.png" alt="Camadas">
        </button>

        <!-- Botão com a imagem point.png -->
        <button id="point-button">
            <img src="point.png" alt="Point">
        </button>

        <!-- Botão com a imagem opacity.png -->
        <button id="opacity-button">
            <img src="opacity.png" alt="Opacidade">
        </button>

        <!-- Menu suspenso para as camadas -->
        <div id="layer-menu" class="layer-menu" style="display: none;"> <!-- Adicionado display: none; -->
            <!-- Seção de Toggle-switches -->
            <div id="toggle-switches">
                <!-- Camada: Hospitais -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleHospitals" onchange="toggleHospitalsLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Hospitais</span>
                </div>

                <!-- Camada: Mapbiomas RS -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleMapbiomas" onchange="toggleMapbiomasLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Mapbiomas RS</span>
                </div>            

                <!-- Camada: Unidades de Conservação -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleUcRs" onchange="toggleUcRsLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Unidades de Conservação</span>
                </div>

                <!-- Camada: Probabilidade de Enchente -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleWMS" onchange="toggleWMSLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Probabilidade de Enchente</span>
                </div>

                <!-- Camada: Elevação -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleElevacao" onchange="toggleElevacaoLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Elevação</span>
                </div>

                <!-- Camada: Mancha de Enchente (GeoJSON) -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleGeoJSON" onchange="toggleGeoJSONLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Mancha de Enchente</span>
                </div>

                <!-- Camada: Precipitação -->
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="togglePrecipitacao" onchange="togglePrecipitacaoLayer()">
                        <span class="slider"></span>
                    </label>
                    <span>Precipitação</span>
                </div>
            </div>
        </div>

        <!-- Seção de Controles de Opacidade -->
        <div id="opacity-controls" class="opacity-controls" style="display: none; position: absolute; top: 50px; right: 50px; background: rgba(255,255,255,0.9); padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
            <!-- Opacidade: Mapbiomas RS -->
            <div class="opacity-container">
                <label for="mapbiomasOpacity">Mapbiomas RS</label>
                <input type="range" id="mapbiomasOpacity" min="0" max="1" step="0.1" value="0.6" onchange="changeMapbiomasOpacity()" style="width: 100px;">
            </div>            

            <!-- Opacidade: Unidades de Conservação -->
            <div class="opacity-container">
                <label for="ucRsOpacity">Unidades de Conservação</label>
                <input type="range" id="ucRsOpacity" min="0" max="1" step="0.1" value="0.6" onchange="changeUcRsOpacity()" style="width: 100px;">
            </div>

            <!-- Opacidade: Probabilidade de Enchente -->
            <div class="opacity-container">
                <label for="wmsOpacity">Probabilidade de Enchente</label>
                <input type="range" id="wmsOpacity" min="0" max="1" step="0.1" value="0.6" onchange="changeWMSOpacity()" style="width: 100px;">
            </div>

            <!-- Opacidade: Elevação -->
            <div class="opacity-container">
                <label for="elevacaoOpacity">Elevação</label>
                <input type="range" id="elevacaoOpacity" min="0" max="1" step="0.1" value="0.6" onchange="changeElevacaoOpacity()" style="width: 100px;">
            </div>

            <!-- Opacidade: Mancha de Enchente (GeoJSON) -->
            <div class="opacity-container">
                <label for="geoJsonOpacity">Mancha de Enchente</label>
                <input type="range" id="geoJsonOpacity" min="0" max="1" step="0.1" value="0.5" onchange="changeGeoJSONOpacity()" style="width: 100px;">
            </div>

            <!-- Opacidade: Precipitação -->
            <div class="opacity-container">
                <label for="precipitacaoOpacity">Precipitação</label>
                <input type="range" id="precipitacaoOpacity" min="0" max="1" step="0.1" value="0.6" onchange="changePrecipitacaoOpacity()" style="width: 100px;">
            </div>
        </div>

        <!-- Adicionando a escala de cores -->
        <div id="color-scale">
            <div id="color-bar"></div>
            <div id="color-labels">
                <span>0%</span>
                <span>50%</span>
                <span>100%</span>
            </div>
        </div>

        <div id="color-scale-geo">
            <div id="color-bar-geo"></div>
            <div id="color-labels-geo">
                <span>0 m</span>
                <span>100 m</span>
                <span>1200 m</span>
            </div>
        </div>

        <!-- Nova escala de cores para precipitação -->
        <div id="color-scale-precipitation">
            <div id="color-bar-precipitation"></div>
            <div id="color-labels-precipitation">
                <span>18 mm</span>
                <span>21 mm</span>
                <span>25 mm</span>
            </div>
        </div>

        <!-- Nova escala de cores categórica -->
        <div id="color-scale-categorical">
            <div id="color-labels-categorical">
                <div class="color-entry" style="background-color: #1f8d49;">Savanna Formation</div>
                <div class="color-entry" style="background-color: #7a5900;">9</div>
                <div class="color-entry" style="background-color: #519799;">11</div>
                <div class="color-entry" style="background-color: #d6bc74;">12</div>
                <div class="color-entry" style="background-color: #edde8e;">15</div>
                <div class="color-entry" style="background-color: #ffefc3;">21</div>
                <div class="color-entry" style="background-color: #ffa07a;">23</div>
                <div class="color-entry" style="background-color: #d4271e;">24</div>
                <div class="color-entry" style="background-color: #db4d4f;">25</div>
                <div class="color-entry" style="background-color: #ffaa5f;">29</div>
                <div class="color-entry" style="background-color: #9c0027;">30</div>
                <div class="color-entry" style="background-color: #091077;">31</div>
                <div class="color-entry" style="background-color: #2532e4;">33</div>
                <div class="color-entry" style="background-color: #f5b3c8;">39</div>
                <div class="color-entry" style="background-color: #c71585;">40</div>
                <div class="color-entry" style="background-color: #f54ca9;">41</div>
                <div class="color-entry" style="background-color: #02d659;">49</div>
                <div class="color-entry" style="background-color: #ad5100;">50</div>
            </div>
        </div>






    </main>

    <script src="script.js"></script>
</body>
</html>
